<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>GeoNEMO - MapaOut</title>

  <!-- Leaflet -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

  <!-- Turf (√°rea, centroide, distancias) -->
  <script src="https://unpkg.com/@turf/turf@6.5.0/turf.min.js"></script>

  <link rel="stylesheet" href="css/mapaout.css" />
</head>

<body>
  <header class="topbar">
    <div class="brand">
      <div class="brand__dot"></div>
      <div class="brand__txt">
        <div class="brand__title">GeoNEMO ¬∑ MapaOut</div>
        <div class="brand__sub">Salida de an√°lisis: punto consultado + vinculaci√≥n por grupos</div>
      </div>
    </div>

    <div class="topbar__right">
      <button id="btnBack" class="btn btn--ghost" type="button">‚Üê Volver</button>

      <div class="dropdown">
        <button id="btnDownloads" class="btn btn--primary" type="button">‚¨á Descargas</button>
        <div id="downloadsMenu" class="dropdown__menu" aria-hidden="true">
          <button id="btnDownloadJSON" class="menuitem" type="button">JSON (resultado)</button>
          <button id="btnDownloadSelectedGeoJSON" class="menuitem" type="button" disabled>GeoJSON (pol√≠gono seleccionado)</button>
          <button id="btnCopyLink" class="menuitem" type="button">Copiar link</button>
        </div>
      </div>
    </div>
  </header>

  <main class="shell">
    <!-- Mapa superior -->
    <section class="card">
      <div class="cardHead">
        <div class="cardTitle">üìç Punto consultado</div>
        <div class="cardHead__right">
          <div id="coordsDisplay" class="pill">‚Äî</div>
          <button class="btnSm btn--ghost" onclick="recenterMainMap()" type="button">üéØ Recentrar</button>
        </div>
      </div>
      
      <!-- Resumen textual de √°reas detectadas -->
      <div id="resumenAreas" style="padding: 0 12px 12px 12px; border-bottom: 1px solid var(--line);"></div>
      
      <div class="mapFrame">
        <div id="map"></div>
        <div id="toast" class="toast" aria-live="polite" aria-atomic="true"></div>
      </div>
    </section>

    <!-- Resultados por grupo -->
    <section class="card" aria-label="Resultados por grupo">
      <div class="cardHead">
        <div class="cardTitle">Resultados por grupo</div>
        <div id="groupsCount" class="pill">0</div>
      </div>

      <div id="groupsWrap" class="groupsWrap"></div>
    </section>

    <div class="footerNote muted">
      * Resultado preliminar de apoyo. No reemplaza pronunciamientos oficiales ni evaluaciones ambientales.
    </div>
  </main>

  <script src="js/mapaout.js"></script>
</body>
</html>